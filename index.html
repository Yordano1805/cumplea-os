<!-- update -->

<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Feliz Cumplea√±os Andrea</title>
  <style>
    :root{--card-bg: rgba(0,0,0,0.45)}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;overflow:hidden}

    .stage{position:relative;min-height:100vh;overflow:hidden;background:linear-gradient(180deg,#0b1d39 0%, #081123 100%);background-size:400% 400%;transition:background 1s;}
    .stage.animate-bg{animation:gradientShift 20s ease infinite;}

    @keyframes gradientShift {
      0%{background-position:0% 50%;background:linear-gradient(180deg,#0b1d39,#081123);}
      25%{background-position:50% 50%;background:linear-gradient(180deg,#1a237e,#311b92);}
      50%{background-position:100% 50%;background:linear-gradient(180deg,#0d47a1,#4a148c);}
      75%{background-position:50% 50%;background:linear-gradient(180deg,#1a237e,#0b1d39);}
      100%{background-position:0% 50%;background:linear-gradient(180deg,#0b1d39,#081123);}
    }

    .card{position:relative;z-index:5;max-width:640px;margin:6vh auto;padding:22px;border-radius:18px;background:var(--card-bg);backdrop-filter:blur(6px);color:#fff;box-shadow:0 10px 30px rgba(0,0,0,0.6);text-align:center}

    h1{margin:6px 0 12px;font-size:26px;letter-spacing:0.6px;color:#fff;}
    .subtitle{margin-top:10px;font-size:16px;opacity:0.95;color:#fff;}

    .fadeInBounce {
      animation: fadeInBounce 1s ease forwards;
    }

    @keyframes fadeInBounce {
      0% {opacity: 0; transform: translateY(-40px) scale(0.9);}
      60% {opacity: 1; transform: translateY(10px) scale(1.05);}
      80% {transform: translateY(-5px) scale(0.97);}
      100% {transform: translateY(0) scale(1);}
    }

    .fadeInUp {
      animation: fadeInUp 1.2s ease forwards;
    }

    @keyframes fadeInUp {
      0% {opacity:0; transform: translateY(40px);}
      100% {opacity:1; transform: translateY(0);}
    }

    .image-wrap{position:relative;display:inline-block;margin:12px auto;padding:8px;border-radius:12px;background:rgba(255,255,255,0.1);overflow:visible}
    .image-wrap img{display:block;max-width:240px;width:100%;height:auto;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,0.6);}

    .zoomIn {
      animation: zoomIn 1s ease forwards;
    }

    @keyframes zoomIn {
      0% {opacity:0; transform: scale(0.5) rotate(-10deg);}
      60% {opacity:1; transform: scale(1.05) rotate(3deg);}
      100% {transform: scale(1) rotate(0deg);}
    }

    .btn{cursor:pointer;margin-top:12px;padding:12px 20px;border-radius:12px;border:none;font-weight:700;font-size:16px;background:linear-gradient(90deg,#ff7a9a,#ff4d6d);color:#fff;box-shadow:0 8px 18px rgba(255,77,109,0.18);transition:transform .15s}
    .btn:active{transform:scale(.98)}

    .heart{position:absolute;background:transparent;opacity:0;transform-origin:center center;z-index:6}

    .particle{position:absolute;width:10px;height:10px;border-radius:50%;pointer-events:none;z-index:8}
    .hint{margin-top:8px;font-size:13px;opacity:0.9;color:#fff}

    .hidden{display:none}

    .balloon{position:absolute;bottom:-150px;border-radius:50%;opacity:0.9;z-index:2;box-shadow:inset -6px -10px 15px rgba(0,0,0,0.2)}
    .string{position:absolute;width:2px;height:50px;background:#ccc;left:50%;transform:translateX(-50%);top:100%;}

    @media (max-width:600px){h1{font-size:20px}.card{margin:4vh 14px;padding:16px}.image-wrap img{max-width:70vw}}
  </style>
</head>
<body>
  <div class="stage" id="stage">
    <div class="card" role="main" aria-live="polite">
      <button class="btn" id="blastBtn">Toca aqu√≠</button>
      <div class="hint">Pulsa el bot√≥n para la sorpresa üéÅ</div>

      <div id="content" class="hidden">
        <h1 id="title">Feliz cumplea√±os ‚ù§Ô∏è</h1>
        <div class="image-wrap" id="imageWrap" aria-hidden="true">
          <img id="targetImage" src="andrea.jpg" alt="Foto de Andrea" />
        </div>
        <div class="subtitle" id="subtitle">Primita de mi coraz√≥n TKM üéÇ</div>
      </div>
    </div>
  </div>

  <audio id="melody" src="cumplea√±os.mp3" preload="auto"></audio>

  <script>
    function spawnHeart(){
      const heart=document.createElement('span');
      heart.className='heart';
      const size=18+Math.random()*20;
      heart.style.fontSize=size+'px';
      heart.style.left=Math.random()*100+"%";
      heart.style.bottom="-40px";
      const colors=['#ff4d6d','#ff7eb9','#ff65a3','#fbb1bd','#ff85a1','#ffb3c6'];
      heart.style.color=colors[Math.floor(Math.random()*colors.length)];
      heart.innerHTML='‚ù§';
      document.body.appendChild(heart);
      const duration=4000+Math.random()*3000;
      const translateX=(Math.random()*60-30);
      const rotate=(Math.random()*60-30);
      heart.animate([
        {transform:`translate(${translateX}px,0) rotate(0deg) scale(${0.8+Math.random()*0.4})`,opacity:1},
        {transform:`translate(${translateX}px,-120vh) rotate(${rotate}deg) scale(${1+Math.random()*0.5})`,opacity:0}
      ],{duration:duration,easing:'ease-in',fill:'forwards'});
      setTimeout(()=>heart.remove(),duration+500);
    }

    function spawnBalloon(){
      const balloon=document.createElement('div');
      balloon.className='balloon';
      const size=40+Math.random()*60;
      balloon.style.width=size+"px";
      balloon.style.height=size*1.3+"px";
      balloon.style.left=Math.random()*100+"%";
      const colors=['#85e3ff','#7ad7ff','#6a5acd','#9370db','#8a2be2','#4b0082'];
      balloon.style.background=colors[Math.floor(Math.random()*colors.length)];
      const string=document.createElement('div');
      string.className='string';
      balloon.appendChild(string);
      document.body.appendChild(balloon);
      const duration=6000+Math.random()*5000;
      const drift=(Math.random()*80-40);
      balloon.animate([
        {transform:`translate(0,0)`,opacity:1},
        {transform:`translate(${drift}px,-120vh)`,opacity:0.9}
      ],{duration:duration,easing:'ease-out',fill:'forwards'});
      setTimeout(()=>balloon.remove(),duration+500);
    }

    (function(){
      const btn=document.getElementById('blastBtn');
      const content=document.getElementById('content');
      const imageWrap=document.getElementById('imageWrap');
      const audio=document.getElementById('melody');
      const stage=document.getElementById('stage');
      const title=document.getElementById('title');
      const subtitle=document.getElementById('subtitle');
      const image=document.getElementById('targetImage');

      function makeParticle(x,y,color){
        const p=document.createElement('div');
        p.className='particle';
        p.style.background=color;
        p.style.left=x+'px';p.style.top=y+'px';
        const size=6+Math.random()*14;
        p.style.width=size+'px';p.style.height=size+'px';
        stage.appendChild(p);
        const ang=Math.random()*Math.PI*2;
        const dist=60+Math.random()*260;
        const dx=Math.cos(ang)*dist;const dy=Math.sin(ang)*dist-(Math.random()*40);
        p.animate([{transform:'translate(0,0) scale(1)',opacity:1},{transform:`translate(${dx}px, ${dy}px) scale(.6)`,opacity:0}],{duration:900+Math.random()*600,easing:'cubic-bezier(.2,.9,.2,1)'});
        setTimeout(()=>p.remove(),1800);
      }
      function randomColor(){
        const pal=['#ff4d6d','#ffd166','#6ee7b7','#7ad7ff','#c078ff','#ff8fb1'];
        return pal[Math.floor(Math.random()*pal.length)];
      }

      let played=false;
      let heartInterval,balloonInterval;
      btn.addEventListener('click',(e)=>{
        const rect=e.target.getBoundingClientRect();
        const cx=rect.left+rect.width/2;
        const cy=rect.top+rect.height/2;
        for(let i=0;i<36;i++) makeParticle(cx,cy,randomColor());
        content.classList.remove('hidden');
        imageWrap.setAttribute('aria-hidden','false');
        stage.classList.add('animate-bg');

        // Animaciones
        title.classList.add('fadeInBounce');
        setTimeout(()=>{
          image.classList.add('zoomIn');
        },300);
        setTimeout(()=>{
          subtitle.classList.add('fadeInUp');
        },700);

        if(!heartInterval){heartInterval=setInterval(spawnHeart,600);}
        if(!balloonInterval){balloonInterval=setInterval(spawnBalloon,1200);}
        try{if(!played){audio.currentTime=0;audio.play();played=true;}}catch(err){console.warn('Audio bloqueado:',err);}
      });
    })()
  </script>
</body>
</html>
